# 并行任务执行计划

本文档定义可以并行执行的任务组，以最大化开发效率。

---

## 1. 并行执行原则

以下情况可以并行执行：

1. **无数据依赖**: 任务间不共享输入/输出
2. **接口已锁定**: 依赖的接口定义已完成
3. **独立模块**: 不同生成器可独立开发
4. **独立验证器**: 各验证器可独立实现

---

## 2. 并行组定义

### 2.1 Gate 0 并行组

#### P0-B: 接口与配置（2 个任务）

**前置条件**: T-001 完成

| Task ID | 任务名称 | 开发工作量 |
|---------|---------|-----------|
| T-002 | 核心接口定义 | 中 |
| T-003 | 配置加载器 | 中 |

**并行理由**: 接口定义和配置加载是独立模块，可同时开发。

---

#### P0-C: 数据模型与工具（3 个任务）

**前置条件**: T-002, T-003 完成

| Task ID | 任务名称 | 开发工作量 |
|---------|---------|-----------|
| T-004 | 数据模型定义 | 大 |
| T-005 | 错误处理框架 | 小 |
| T-006 | 版本注册器 | 小 |

**并行理由**: 数据模型、错误处理、版本管理是独立模块。

---

### 2.2 Gate 1 并行组

Gate 1 的任务主要为串行链，但以下分支可并行：

#### P1-分支: JSON Tree 后的分支

**前置条件**: T-108 完成

T-108 完成后，以下任务链可并行启动：

| 分支 | 任务链 | 目标 |
|------|--------|------|
| 分支 A | T-109 → T-110 → T-111 | XML 生成 |
| 分支 B | 准备 T-201 | Response 解析准备 |

---

### 2.3 Gate 2 并行组

#### P2-A: 四路并行生成器启动（4 个任务）

**前置条件**: T-107 (Excel 解析器) 和 T-108 (JSON Tree) 完成

| Task ID | 任务名称 | 分支目标 |
|---------|---------|---------|
| T-201 | Response Sheet 解析 | Inbound XML |
| T-203 | Java 类型映射 | Java Bean |
| T-207 | OpenAPI Schema 映射 | OpenAPI YAML |
| T-210 | diff.md 生成器 | 审计映射表 |

**并行理由**: 四个生成器分支独立，仅依赖 JSON Tree 输入。

```
               ┌─→ T-201 → T-202 (Inbound XML)
               │
T-108 ─────────┼─→ T-203 → T-204 → T-205 → T-206 (Java Bean)
               │
               ├─→ T-207 → T-208 → T-209 (OpenAPI)
               │
               └─→ T-210 (diff.md)
```

---

#### P2-B: 生成器核心（3 个任务）

**前置条件**: P2-A 对应任务完成

| Task ID | 任务名称 | 依赖 |
|---------|---------|------|
| T-202 | Inbound XML 生成器 | T-201 |
| T-204 | Java Bean 生成器 | T-203 |
| T-208 | OpenAPI 主文件生成 | T-207 |

**并行理由**: 三个生成器核心独立开发。

---

#### P2-C: 生成器扩展（2 个任务）

**前置条件**: P2-B 对应任务完成

| Task ID | 任务名称 | 依赖 |
|---------|---------|------|
| T-205 | 嵌套类生成 | T-204 |
| T-209 | OpenAPI Schema 拆分 | T-208 |

**并行理由**: Java 嵌套类和 OpenAPI Schema 拆分独立。

---

### 2.4 Gate 3 并行组

#### P3-A: 验证器与偏移量计算（4 个任务）

**前置条件**: Gate 2 完成

| Task ID | 任务名称 | 验证目标 |
|---------|---------|---------|
| T-301 | XML Bean 验证器 | XML 制品 |
| T-302 | Java Bean 验证器 | Java 制品 |
| T-303 | OpenAPI 验证器 | YAML 制品 |
| T-305 | 偏移量计算器 | 报文解析 |

**并行理由**: 四个验证器/计算器完全独立。

```
         ┌─→ T-301 ─┐
         │          │
Gate 2 ──┼─→ T-302 ─┼─→ T-304 (一致性验证)
         │          │
         ├─→ T-303 ─┘
         │
         └─→ T-305 → T-306 (报文验证)
```

---

#### P3-B: 集成验证（2 个任务）

**前置条件**: P3-A 对应任务完成

| Task ID | 任务名称 | 依赖 |
|---------|---------|------|
| T-304 | 跨制品一致性验证 | T-301, T-302, T-303 |
| T-306 | 报文验证器 | T-305 |

**并行理由**: 一致性验证和报文验证独立。

---

## 3. 并行执行时间线

### 时间线概览

```
Week 1:
├── T-001 (项目初始化)
├── P0-B: T-002 || T-003
└── P0-C: T-004 || T-005 || T-006

Week 2:
├── T-101 → T-102 → T-103
├── T-104 → T-105 → T-106
└── T-107 (解析器集成)

Week 3:
├── T-108 (JSON Tree)
├── T-109 → T-110 → T-111 (Outbound XML)
└── Gate 1 验收

Week 4:
├── P2-A: T-201 || T-203 || T-207 || T-210
├── P2-B: T-202 || T-204 || T-208
└── P2-C: T-205 || T-209

Week 5:
├── T-206 (枚举辅助方法)
├── Gate 2 验收
└── P3-A: T-301 || T-302 || T-303 || T-305

Week 6:
├── P3-B: T-304 || T-306
├── T-307 → T-308 → T-309
└── T-310 (集成测试)
```

---

## 4. 并行资源分配建议

### 4.1 开发者分配（假设 3 人团队）

| 开发者 | Gate 0 | Gate 1 | Gate 2 | Gate 3 |
|--------|--------|--------|--------|--------|
| Dev A | T-002, T-004 | T-101~T-107 | T-201, T-202 | T-301, T-304 |
| Dev B | T-003, T-006 | T-108~T-111 | T-203~T-206 | T-302, T-307, T-308 |
| Dev C | T-005 | 测试支持 | T-207~T-210 | T-303, T-305, T-306, T-309, T-310 |

### 4.2 并行效率预估

| Gate | 串行时间 | 并行时间 | 效率提升 |
|------|---------|---------|---------|
| Gate 0 | 6 天 | 3 天 | 50% |
| Gate 1 | 11 天 | 11 天 | 0%（主要为串行） |
| Gate 2 | 10 天 | 5 天 | 50% |
| Gate 3 | 10 天 | 6 天 | 40% |
| **总计** | **37 天** | **25 天** | **32%** |

---

## 5. 并行执行注意事项

### 5.1 接口锁定点

以下接口必须在并行开发前锁定：

| 接口 | 锁定时间 | 影响范围 |
|------|---------|---------|
| FieldNode, MessageModel | T-004 完成 | 所有解析器和生成器 |
| Generator 接口 | T-002 完成 | 所有生成器 |
| Validator 接口 | T-002 完成 | 所有验证器 |
| Config schema | T-003 完成 | 所有配置使用者 |

### 5.2 集成点风险

| 集成点 | 涉及任务 | 风险等级 | 缓解措施 |
|--------|---------|---------|---------|
| Excel 解析器 | T-107 | 高 | 提前定义 FieldNode 结构 |
| JSON Tree | T-108 | 高 | 提前定义 JSON Schema |
| 跨制品验证 | T-304 | 中 | 提前定义验证规则编号 |
| CLI 集成 | T-309 | 中 | 提前定义命令行参数 |

### 5.3 并行开发协调

1. **每日同步**: 并行任务开发者每日同步进度
2. **接口变更**: 接口变更需通知所有相关开发者
3. **集成窗口**: 每个 Gate 结束时安排集成窗口
4. **回归测试**: 集成后运行回归测试套件

---

## 6. 并行组执行检查清单

### P0-B 检查清单

- [ ] T-002 核心接口定义 - 完成
- [ ] T-003 配置加载器 - 完成
- [ ] 接口兼容性验证

### P0-C 检查清单

- [ ] T-004 数据模型定义 - 完成
- [ ] T-005 错误处理框架 - 完成
- [ ] T-006 版本注册器 - 完成
- [ ] 模块集成测试

### P2-A 检查清单

- [ ] T-201 Response Sheet 解析 - 完成
- [ ] T-203 Java 类型映射 - 完成
- [ ] T-207 OpenAPI Schema 映射 - 完成
- [ ] T-210 diff.md 生成器 - 完成
- [ ] JSON Tree 消费一致性验证

### P3-A 检查清单

- [ ] T-301 XML Bean 验证器 - 完成
- [ ] T-302 Java Bean 验证器 - 完成
- [ ] T-303 OpenAPI 验证器 - 完成
- [ ] T-305 偏移量计算器 - 完成
- [ ] 验证器独立测试通过

---

**文档结束**
